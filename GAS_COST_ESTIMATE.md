# コントラクトデプロイガス代見積もり

## コントラクトサイズ

- **TestUSDT**: 3,732 bytes
- **LaterPayV2**: 6,437 bytes

両方とも24KB制限（EIP-170）より小さいため、デプロイ可能です。

---

## ガス消費量の見積もり

### TestUSDT コントラクト

- **基本デプロイガス**: 32,000ガス
- **バイトコード保存**: 3,732 bytes × 200ガス/byte = 746,400ガス
- **コンストラクタ処理**（初期ミント含む）: 約50,000-100,000ガス
- **合計見積もり**: 約 **800,000 - 850,000ガス**

### LaterPayV2 コントラクト

- **基本デプロイガス**: 32,000ガス
- **バイトコード保存**: 6,437 bytes × 200ガス/byte = 1,287,400ガス
- **コンストラクタ処理**: 約30,000-50,000ガス
- **合計見積もり**: 約 **1,350,000 - 1,370,000ガス**

### 合計（両方デプロイ）

- **合計ガス量**: 約 **2,150,000 - 2,220,000ガス**

---

## ネットワーク別ガス代見積もり

### 1. BSC Mainnet（推奨・本番環境）

**ガス価格**: 3-5 Gwei（2024年現在の平均）

#### TestUSDT
- ガス量: 850,000ガス
- ガス価格: 5 Gwei
- **ガス代**: 850,000 × 5 Gwei = 4,250,000 Gwei = **0.00425 BNB**
- **USD換算**（BNB = $300の場合）: **約 $1.28**

#### LaterPayV2
- ガス量: 1,370,000ガス
- ガス価格: 5 Gwei
- **ガス代**: 1,370,000 × 5 Gwei = 6,850,000 Gwei = **0.00685 BNB**
- **USD換算**（BNB = $300の場合）: **約 $2.06**

#### 合計（両方デプロイ）
- **合計ガス代**: **0.0111 BNB**（約 **$3.33**）

**注意**: ガス価格が3 Gweiの場合、約 **$2.00** まで下がります。

---

### 2. Ethereum Mainnet

**ガス価格**: 20-50 Gwei（2024年現在の平均、混雑時は100+ Gwei）

#### TestUSDT
- ガス量: 850,000ガス
- ガス価格: 30 Gwei（平均）
- **ガス代**: 850,000 × 30 Gwei = 25,500,000 Gwei = **0.0255 ETH**
- **USD換算**（ETH = $2,500の場合）: **約 $63.75**

#### LaterPayV2
- ガス量: 1,370,000ガス
- ガス価格: 30 Gwei
- **ガス代**: 1,370,000 × 30 Gwei = 41,100,000 Gwei = **0.0411 ETH**
- **USD換算**（ETH = $2,500の場合）: **約 $102.75**

#### 合計（両方デプロイ）
- **合計ガス代**: **0.0666 ETH**（約 **$166.50**）

**注意**: 混雑時（100 Gwei）の場合、約 **$555** まで上がる可能性があります。

---

### 3. Sepolia Testnet（テスト用）

**ガス価格**: 無料（テストネット）

- **ガス代**: **$0.00**

---

### 4. BSC Testnet（テスト用）

**ガス価格**: 無料（テストネット）

- **ガス代**: **$0.00**

---

## 実際のガス代を確認する方法

### 1. テストネットでデプロイして確認

```bash
# Sepolia Testnetでデプロイ
npm run deploy:sepolia

# または BSC Testnetでデプロイ
npm run deploy:bsc-testnet
```

デプロイ時に表示されるガス使用量を確認できます。

### 2. Hardhatのガスレポートを使用

```bash
REPORT_GAS=true npm run deploy:bsc
```

### 3. オンラインガス計算ツール

- **BSC**: https://bscscan.com/gastracker
- **Ethereum**: https://etherscan.io/gastracker

---

## ガス代を節約する方法

### 1. オプティマイザーの設定

`hardhat.config.js`で既に設定済み：
```javascript
optimizer: {
  enabled: true,
  runs: 200,
}
```

### 2. ガス価格が安い時間帯にデプロイ

- BSC: 通常は常に安い（3-5 Gwei）
- Ethereum: 深夜や週末が安い傾向

### 3. ガス価格を手動設定

```javascript
// hardhat.config.js
bsc: {
  gasPrice: 3000000000, // 3 Gwei（固定）
}
```

---

## まとめ

### 本番環境（BSC Mainnet）推奨

| コントラクト | ガス量 | ガス代（BNB） | USD換算 |
|------------|--------|--------------|---------|
| TestUSDT | 850,000 | 0.00425 BNB | $1.28 |
| LaterPayV2 | 1,370,000 | 0.00685 BNB | $2.06 |
| **合計** | **2,220,000** | **0.0111 BNB** | **$3.33** |

### Ethereum Mainnet（参考）

| コントラクト | ガス量 | ガス代（ETH） | USD換算 |
|------------|--------|--------------|---------|
| TestUSDT | 850,000 | 0.0255 ETH | $63.75 |
| LaterPayV2 | 1,370,000 | 0.0411 ETH | $102.75 |
| **合計** | **2,220,000** | **0.0666 ETH** | **$166.50** |

**結論**: BSC Mainnetでのデプロイが**約50倍安い**です。

---

## 注意事項

- 上記は**見積もり**です。実際のガス代はネットワークの混雑状況により変動します。
- ガス価格は時間帯やネットワークの混雑状況により大きく変動する可能性があります。
- デプロイ前にテストネットで実際のガス使用量を確認することを強く推奨します。

